<!-- components/products/products.component.html -->
<div class="products-container">
    <h2>Produits Digitaux</h2>

    <div *ngIf="isLoading" class="loading-container">
        <p-progressSpinner></p-progressSpinner>
        <p>Chargement des produits...</p>
    </div>

    <div class="products-grid" *ngIf="!isLoading">
        <p-card *ngFor="let product of products" styleClass="product-card">
            <ng-template pTemplate="header">
                <div class="product-header">
                    <i class="pi pi-shopping-bag product-icon"></i>
                </div>
            </ng-template>

            <div class="product-content">
                <h3>{{ product.name }}</h3>
                <div class="product-price">
                    {{ formatPrice(product.amount, product.currency) }}
                </div>
                <div class="product-description">
                    <p>Produit digital de haute qualité</p>
                    <ul class="product-features">
                        <li><i class="pi pi-download"></i> Téléchargement immédiat</li>
                        <li><i class="pi pi-shield"></i> Accès à vie</li>
                        <li><i class="pi pi-mobile"></i> Compatible tous appareils</li>
                    </ul>
                </div>
            </div>

            <ng-template pTemplate="footer">
                <p-button label="Acheter maintenant" icon="pi pi-credit-card" (onClick)="purchaseProduct(product)" [loading]="isProcessing(product.priceId)" styleClass="p-button-success w-full"> </p-button>
            </ng-template>
        </p-card>
    </div>

    <div *ngIf="!isLoading && products.length === 0" class="no-products">
        <p-message severity="info" text="Aucun produit disponible pour le moment."> </p-message>
    </div>
</div>
