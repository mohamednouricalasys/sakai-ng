<div class="p-card">
    <div class="p-card-title">My Athletes</div>
    <div class="p-card-content">
        <p-toolbar styleClass="mb-4">
            <ng-template pTemplate="left">
                <button pButton pRipple label="Add New Athlete" icon="pi pi-plus" class="p-button-success mr-2" (click)="openNewAthleteDialog()"></button>
            </ng-template>
        </p-toolbar>

        <p-table [value]="athletes" [paginator]="true" [rows]="10" [responsive]="true">
            <ng-template pTemplate="header">
                <tr>
                    <th>Name</th>
                    <th>Sport</th>
                    <th>Age</th>
                    <th>Actions</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-athlete>
                <tr>
                    <td>{{ athlete?.name }}</td>
                    <td>{{ athlete?.sport }}</td>
                    <td>{{ athlete?.age }}</td>
                    <td>
                        <button pButton pRipple icon="pi pi-eye" class="p-button-rounded p-button-info mr-2" (click)="viewAthlete(athlete)" pTooltip="View"></button>
                        <button pButton pRipple icon="pi pi-pencil" class="p-button-rounded p-button-warning mr-2" (click)="editAthlete(athlete)" pTooltip="Edit"></button>
                        <button pButton pRipple icon="pi pi-trash" class="p-button-rounded p-button-danger" (click)="deleteAthlete(athlete)" pTooltip="Delete"></button>
                    </td>
                </tr>
            </ng-template>
            <ng-template pTemplate="emptyMessage">
                <tr>
                    <td colspan="4">No athletes found.</td>
                </tr>
            </ng-template>
        </p-table>
    </div>
</div>

<p-dialog [(visible)]="athleteDialogVisible" [style]="{ width: '450px' }" header="{{ isEditMode ? 'Edit Athlete' : 'Add New Athlete' }}" [modal]="true" styleClass="p-fluid">
    <ng-template pTemplate="content">
        <div class="p-field">
            <label for="name">Name</label>
            <input id="name" type="text" pInputText [(ngModel)]="selectedAthlete!.name" required autofocus />
            <small class="p-error" *ngIf="!selectedAthlete!.name">Name is required.</small>
        </div>
        <div class="p-field">
            <label for="sport">Sport</label>
            <input id="sport" type="text" pInputText [(ngModel)]="selectedAthlete!.sport" required />
            <small class="p-error" *ngIf="!selectedAthlete!.sport">Sport is required.</small>
        </div>
        <div class="p-field">
            <label for="age">Age</label>
            <p-inputNumber id="age" [(ngModel)]="selectedAthlete!.age" [showButtons]="true" [min]="0" [max]="100"></p-inputNumber>
            <small class="p-error" *ngIf="!selectedAthlete!.age">Age is required.</small>
        </div>
    </ng-template>

    <ng-template pTemplate="footer">
        <button pButton pRipple label="Cancel" icon="pi pi-times" class="p-button-text" (click)="athleteDialogVisible = false"></button>
        <button pButton pRipple label="Save" icon="pi pi-check" class="p-button-text" (click)="saveAthlete()" [disabled]="!selectedAthlete!.name || !selectedAthlete!.sport || !selectedAthlete!.age"></button>
    </ng-template>
</p-dialog>

<p-confirmDialog [style]="{ width: '50vw' }"></p-confirmDialog>
<p-toast></p-toast>
